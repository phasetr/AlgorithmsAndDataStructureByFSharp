#r "nuget: FsUnit"
open FsUnit

let N,Aa = 3,[|[|0;1;1|];[|1;0;1|];[|1;1;1|]|]
let solve N (Aa:int[][]) =
    let bit n k = (n >>> k) &&& 1
    let (+%) x y = (x+y)%1_000_000_007
    let n = 1<<<N
    let mutable dp = Array.zeroCreate n
    dp.[0] <- 1
    for S in 0..n-1 do
        let i = System.Numerics.BitOperations.PopCount(uint32 S)
        for j in 0..N-1 do
            if (bit S j = 1) && Aa.[j].[i-1]=1 then dp.[S] <- dp.[S] +% dp.[S^^^(1<<<j)]
    dp.[n-1]
let N = stdin.ReadLine() |> int
let Aa = [| for i in 1..N do (stdin.ReadLine().Split() |> Array.map int) |]
solve N Aa |> stdout.WriteLine

solve 3 [|[|0;1;1|];[|1;0;1|];[|1;1;1|]|] |> should equal 3
solve 4 [|[|0;1;0;0|];[|0;0;0;1|];[|1;0;0;0|];[|0;0;1;0|]|] |> should equal 1
solve 1 [|[|0|]|] |> should equal 0
solve 21 [|[|0;0;0;0;0;0;0;1;1;0;1;1;1;1;0;0;0;1;0;0;1|];[|1;1;1;0;0;1;0;0;0;1;0;0;0;0;1;1;1;0;1;1;0|];[|0;0;1;1;1;1;0;1;1;0;0;1;0;0;1;1;0;0;0;1;1|];[|0;1;1;0;1;1;0;1;0;1;0;0;1;0;0;0;0;0;1;1;0|];[|1;1;0;0;1;0;1;0;0;1;1;1;1;0;0;0;0;0;0;0;0|];[|0;1;1;0;1;1;1;0;1;1;1;0;0;0;1;1;1;1;0;0;1|];[|0;1;0;0;0;1;0;1;0;0;0;1;1;1;0;0;1;1;0;1;0|];[|0;0;0;0;1;1;0;0;1;1;0;0;0;0;0;1;1;1;1;1;1|];[|0;0;1;0;0;1;0;0;1;0;1;1;0;0;1;0;1;0;1;1;1|];[|0;0;0;0;1;1;0;0;1;1;1;0;0;0;0;1;1;0;0;0;1|];[|0;1;1;0;1;1;0;0;1;1;0;0;0;1;1;1;1;0;1;1;0|];[|0;0;1;0;0;1;1;1;1;0;1;1;0;1;1;1;0;0;0;0;1|];[|0;1;1;0;0;1;1;1;1;0;0;0;1;0;1;1;0;1;0;1;1|];[|1;1;1;1;1;0;0;0;0;1;0;0;1;1;0;1;1;1;0;0;1|];[|0;0;0;1;1;0;1;1;1;1;0;0;0;0;0;0;1;1;1;1;1|];[|1;0;1;1;0;1;0;1;0;0;1;0;0;1;1;0;1;0;1;1;0|];[|0;0;1;1;0;0;1;1;0;0;1;1;0;0;1;1;1;1;0;0;1|];[|0;0;0;1;0;0;1;1;0;1;0;1;0;1;1;0;0;1;1;0;1|];[|0;0;0;0;1;1;1;0;1;0;1;1;1;0;1;1;0;0;1;1;0|];[|1;1;0;1;1;0;0;1;1;0;1;1;0;1;1;1;1;1;0;1;0|];[|1;0;0;1;1;0;1;1;1;1;1;0;1;0;1;1;0;0;0;0;0|]|] |> should equal 102515160
